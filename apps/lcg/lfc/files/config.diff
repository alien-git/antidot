--- ./work/lfc-1.3.7/config/site.def	Mon Jun 27 10:35:18 2005
+++ ./work/lfc-1.3.7/config/site.def.new	Sun Jul 31 18:38:35 2005
@@ -13,7 +13,7 @@
 
 
 /* Prefix by default */
-prefix = /opt/lcg
+prefix = $(PREFIX)
 
 /* First define the flavour of Name Server to be built */
 #define BuildNameServerAsLFC	NO
@@ -22,7 +22,7 @@
 #if defined(_WIN32)
 #define CupvConfigFile	%%SystemRoot%%\\system32\\drivers\\etc\\CUPVCONFIG
 #else
-#define CupvConfigFile	/etc/CUPVCONFIG
+#define CupvConfigFile	$(prefix)/etc/CUPVCONFIG
 #endif
 #define CupvHost	"UNUSED"
 #define CupvSpool	/usr/spool/upv
@@ -31,17 +31,17 @@
 #if defined(_WIN32)
 #define DpmConfigFile	%%SystemRoot%%\\system32\\drivers\\etc\\DPMCONFIG
 #else
-#define DpmConfigFile	/opt/lcg/etc/DPMCONFIG
+#define DpmConfigFile	$(prefix)/etc/DPMCONFIG
 #endif
 #define DpmHost	"UNUSED"
 #define DpmSpool	/var/log/dpm
 #define FilManDir       $(prefix)/man/man4
 #define FilManSuffix    4
-#define GlobusLocation	/opt/globus
+#define GlobusLocation	$(prefix)/globus
 #if defined(__ia64__) || defined(__x86_64)
-#define GlobusFlavour	gcc64dbg
+#define GlobusFlavour	gcc64
 #else
-#define GlobusFlavour	gcc32dbg
+#define GlobusFlavour	gcc32
 #endif
 #define GsoapLocation	/opt
 #define GsoapVersion	2.6
@@ -74,7 +74,7 @@
 #if defined(_WIN32)
 #define NsConfigFile	%%SystemRoot%%\\system32\\drivers\\etc\\NSCONFIG
 #else
-#define NsConfigFile	/opt/lcg/etc/NSCONFIG
+#define NsConfigFile	$(prefix)/etc/NSCONFIG
 #endif
 #define NsHost	"UNUSED"
 #if BuildNameServerAsLFC
--- ./work/lfc-1.3.7/dli/Imakefile	Sat Jun 11 01:44:10 2005
+++ ./work/lfc-1.3.7/dli/Imakefile.new	Sun Jul 31 18:33:30 2005
@@ -8,9 +8,9 @@
 
 GLOBUS_LOCATION=GlobusLocation
 #if defined(__STDC__)
-GLOBUS_FLAVOUR=GlobusFlavour##pthr
+GLOBUS_FLAVOUR=GlobusFlavour
 #else
-GLOBUS_FLAVOUR=GlobusFlavour/**/pthr
+GLOBUS_FLAVOUR=GlobusFlavour
 #endif
 GLOBUS_LIBS=-L$(GLOBUS_LOCATION)/lib -lglobus_gssapi_gsi_$(GLOBUS_FLAVOUR) -lglobus_gss_assist_$(GLOBUS_FLAVOUR)
 GSOAP_LOCATION=GsoapLocation
--- ./work/lfc-1.3.7/ns/Imakefile	Wed Jun 15 14:14:42 2005
+++ ./work/lfc-1.3.7/ns/Imakefile.new	Sun Jul 31 18:34:34 2005
@@ -18,9 +18,9 @@
 #if UseGSI
 GLOBUS_LOCATION=GlobusLocation
 #if defined(__STDC__)
-GLOBUS_FLAVOUR=GlobusFlavour##pthr
+GLOBUS_FLAVOUR=GlobusFlavour
 #else
-GLOBUS_FLAVOUR=GlobusFlavour/**/pthr
+GLOBUS_FLAVOUR=GlobusFlavour
 #endif
 GLOBUS_LIBS=-L$(GLOBUS_LOCATION)/lib -lglobus_gssapi_gsi_$(GLOBUS_FLAVOUR) -lglobus_gss_assist_$(GLOBUS_FLAVOUR)
 LIBCSEC += $(GLOBUS_LIBS)
--- ./work/lfc-1.3.7/security/Imakefile	Sat Jun 11 01:44:11 2005
+++ ./work/lfc-1.3.7/security/Imakefile.new	Sun Jul 31 18:36:45 2005
@@ -32,9 +32,9 @@
 GLOBUS_LOCATION=GlobusLocation
 GLOBUS_FLAVOUR_NONPTHR=GlobusFlavour
 #if defined(__STDC__)
-GLOBUS_FLAVOUR=GlobusFlavour##pthr
+GLOBUS_FLAVOUR=GlobusFlavour
 #else
-GLOBUS_FLAVOUR=GlobusFlavour/**/pthr
+GLOBUS_FLAVOUR=GlobusFlavour
 #endif
 #define GSIMech GSI
 #define SecAuthMechGSI       -DGSI
--- ./work/lfc-1.3.7/srmv1/Imakefile	Sat Jun 11 01:44:11 2005
+++ ./work/lfc-1.3.7/srmv1/Imakefile.new	Sun Jul 31 18:37:19 2005
@@ -13,9 +13,9 @@
 DPMCONFIG = DpmConfigFile
 GLOBUS_LOCATION=GlobusLocation
 #if defined(__STDC__)
-GLOBUS_FLAVOUR=GlobusFlavour##pthr
+GLOBUS_FLAVOUR=GlobusFlavour
 #else
-GLOBUS_FLAVOUR=GlobusFlavour/**/pthr
+GLOBUS_FLAVOUR=GlobusFlavour
 #endif
 GLOBUS_LIBS=-L$(GLOBUS_LOCATION)/lib -lglobus_gssapi_gsi_$(GLOBUS_FLAVOUR) -lglobus_gss_assist_$(GLOBUS_FLAVOUR)
 GSOAP_LOCATION=GsoapLocation
--- ./work/lfc-1.3.7/srmv2/Imakefile	Sat Jun 11 01:44:11 2005
+++ ./work/lfc-1.3.7/srmv2/Imakefile.new	Sun Jul 31 18:37:45 2005
@@ -13,9 +13,9 @@
 DPMCONFIG = DpmConfigFile
 GLOBUS_LOCATION=GlobusLocation
 #if defined(__STDC__)
-GLOBUS_FLAVOUR=GlobusFlavour##pthr
+GLOBUS_FLAVOUR=GlobusFlavour
 #else
-GLOBUS_FLAVOUR=GlobusFlavour/**/pthr
+GLOBUS_FLAVOUR=GlobusFlavour
 #endif
 GLOBUS_LIBS=-L$(GLOBUS_LOCATION)/lib -lglobus_gssapi_gsi_$(GLOBUS_FLAVOUR) -lglobus_gss_assist_$(GLOBUS_FLAVOUR)
 GSOAP_LOCATION=GsoapLocation
--- work/lfc-1.3.7/dpm/Imakefile	Wed Jun 15 14:14:41 2005
+++ work/lfc-1.3.7/dpm/Imakefile.new	Sun Jul 31 18:45:02 2005
@@ -12,9 +12,9 @@
 #if UseGSI
 GLOBUS_LOCATION=GlobusLocation
 #if defined(__STDC__)
-GLOBUS_FLAVOUR=GlobusFlavour##pthr
+GLOBUS_FLAVOUR=GlobusFlavour
 #else
-GLOBUS_FLAVOUR=GlobusFlavour/**/pthr
+GLOBUS_FLAVOUR=GlobusFlavour
 #endif
 GLOBUS_LIBS=-L$(GLOBUS_LOCATION)/lib -lglobus_gssapi_gsi_$(GLOBUS_FLAVOUR) -lglobus_gss_assist_$(GLOBUS_FLAVOUR)
 LIBCSEC += $(GLOBUS_LIBS)
--- work/lfc-1.3.7/srmv1/Imakefile	Sun Jul 31 19:02:39 2005
+++ work/lfc-1.3.7/srmv1/Imakefile.new	Sun Jul 31 19:13:02 2005
@@ -77,7 +77,7 @@
 srmv1H.h srmv1Stub.h srmv1C.c srmv1Server.c ISRM.nsmap: srm.v1.1.h
 	$(GSOAP)/soapcpp2 -c -p srmv1 srm.v1.1.h
 srm.v1.1.h: srm.v1.1.wsdl
-	$(GSOAP)/wsdl2h -c -t typemap.dat srm.v1.1.wsdl
+	wsdl2h -c -t typemap.dat srm.v1.1.wsdl
 
 #if UseOracle && !defined(_WIN32)
 srmv1: $(SRV_OBJS) $(DEPLIB)
--- work/lfc-1.3.7/srmv2/Imakefile	Sun Jul 31 19:02:39 2005
+++ work/lfc-1.3.7/srmv2/Imakefile.new	Sun Jul 31 19:13:45 2005
@@ -81,7 +81,7 @@
 srmv2H.h srmv2Stub.h srmv2C.c srmv2Server.c srmSoapBinding.nsmap: srm.v2.1.1.h
 	$(GSOAP)/soapcpp2 -c -p srmv2 srm.v2.1.1.h
 srm.v2.1.1.h: srm.v2.1.1.wsdl
-	$(GSOAP)/wsdl2h -c -t typemap.dat srm.v2.1.1.wsdl
+	wsdl2h -c -t typemap.dat srm.v2.1.1.wsdl
 
 #if UseOracle && !defined(_WIN32)
 srmv2: $(SRV_OBJS) $(DEPLIB)
--- work/lfc-1.3.7/srmv2/Imakefile	Sun Jul 31 19:15:59 2005
+++ work/lfc-1.3.7/srmv2/Imakefile.new	Sun Jul 31 19:17:46 2005
@@ -79,7 +79,7 @@
 	$(CC) -c $(GSOAP)/stdsoap2.c
 
 srmv2H.h srmv2Stub.h srmv2C.c srmv2Server.c srmSoapBinding.nsmap: srm.v2.1.1.h
-	$(GSOAP)/soapcpp2 -c -p srmv2 srm.v2.1.1.h
+	soapcpp2 -c -p srmv2 srm.v2.1.1.h
 srm.v2.1.1.h: srm.v2.1.1.wsdl
 	wsdl2h -c -t typemap.dat srm.v2.1.1.wsdl
 
--- work/lfc-1.3.7/srmv1/Imakefile	Sun Jul 31 19:15:59 2005
+++ work/lfc-1.3.7/srmv1/Imakefile.new	Sun Jul 31 19:19:16 2005
@@ -75,7 +75,7 @@
 	$(CC) -c $(GSOAP)/stdsoap2.c
 
 srmv1H.h srmv1Stub.h srmv1C.c srmv1Server.c ISRM.nsmap: srm.v1.1.h
-	$(GSOAP)/soapcpp2 -c -p srmv1 srm.v1.1.h
+	soapcpp2 -c -p srmv1 srm.v1.1.h
 srm.v1.1.h: srm.v1.1.wsdl
 	wsdl2h -c -t typemap.dat srm.v1.1.wsdl
 
--- work/lfc-1.3.7/srmv1/Imakefile	Sun Jul 31 19:39:39 2005
+++ work/lfc-1.3.7/srmv1/Imakefile.new	Sun Jul 31 19:42:10 2005
@@ -20,7 +20,7 @@
 GLOBUS_LIBS=-L$(GLOBUS_LOCATION)/lib -lglobus_gssapi_gsi_$(GLOBUS_FLAVOUR) -lglobus_gss_assist_$(GLOBUS_FLAVOUR)
 GSOAP_LOCATION=GsoapLocation
 GSOAP_VERSION=GsoapVersion
-GSOAP = FileName($(GSOAP_LOCATION),gsoap-$(GSOAP_PLATFORM)-$(GSOAP_VERSION))
+GSOAP = $(GSOAP_LOCATION)/share/soapcpp2
 SECLIB = -lcgsi_plugin_gsoap_$(GSOAP_VERSION) $(GLOBUS_LIBS)
 INCLUDES = FileName(..,h)
 LIBS = -L../lib -ldpm $(LIBCSEC)
--- work/lfc-1.3.7/srmv2/Imakefile	Sun Jul 31 19:39:39 2005
+++ work/lfc-1.3.7/srmv2/Imakefile.new	Sun Jul 31 19:42:47 2005
@@ -20,7 +20,7 @@
 GLOBUS_LIBS=-L$(GLOBUS_LOCATION)/lib -lglobus_gssapi_gsi_$(GLOBUS_FLAVOUR) -lglobus_gss_assist_$(GLOBUS_FLAVOUR)
 GSOAP_LOCATION=GsoapLocation
 GSOAP_VERSION=GsoapVersion
-GSOAP = FileName($(GSOAP_LOCATION),gsoap-$(GSOAP_PLATFORM)-$(GSOAP_VERSION))
+GSOAP = $(GSOAP_LOCATION)/share/soapcpp2
 SECLIB = -lcgsi_plugin_gsoap_$(GSOAP_VERSION) $(GLOBUS_LIBS)
 INCLUDES = FileName(..,h)
 LIBS = -L../lib -ldpm $(LIBCSEC)
--- work/lfc-1.3.7/config/site.def	Sun Jul 31 19:44:36 2005
+++ work/lfc-1.3.7/config/site.def.new	Sun Jul 31 19:48:52 2005
@@ -43,7 +43,7 @@
 #else
 #define GlobusFlavour	gcc32
 #endif
-#define GsoapLocation	/opt
+#define GsoapLocation	$(prefix)
 #define GsoapVersion	2.6
 #if defined(_WIN32)
 #define InstallBinDir	\\cern.ch\dfs\Applications\CERN\LFC\bin
--- work/lfc-1.3.7/dpm/Imakefile	Sun Jul 31 19:50:14 2005
+++ work/lfc-1.3.7/dpm/Imakefile.new	Tue Aug  2 09:55:20 2005
@@ -169,9 +169,9 @@
 
 #if UseOracle && !defined(_WIN32)
 dpm: $(SRV_OBJS) $(DEPLIB)
-	$(MAKE) -f oralink.mk dpm SRV_OBJS="$(SRV_OBJS)" CLDFLAGS=$(MTLDFLAGS) LIBS="$(SECLIB) $(LIBS) $(MTLDLIBS) -luuid"
+	$(MAKE) -f oralink.mk dpm SRV_OBJS="$(SRV_OBJS)" CLDFLAGS=$(MTLDFLAGS) LIBS="$(SECLIB) $(LIBS) $(MTLDLIBS) /usr/lib/libuuid.a"
 #else
-NormalProgramTarget(dpm,$(SRV_OBJS), $(DEPLIB), $(MTLDFLAGS) $(SECLIB) $(LIBS) $(MTLDLIBS) $(LIBORA) $(LIBMYS) -luuid)
+NormalProgramTarget(dpm,$(SRV_OBJS), $(DEPLIB), $(MTLDFLAGS) $(SECLIB) $(LIBS) $(MTLDLIBS) $(LIBORA) $(LIBMYS) /usr/lib/libuuid.a)
 #endif
 
 NormalLibraryTarget(dpm,$(DPMLIB_OBJS))
--- work/lfc-1.3.7/ns/Imakefile	Sun Jul 31 19:50:14 2005
+++ work/lfc-1.3.7/ns/Imakefile.new	Tue Aug  2 09:57:27 2005
@@ -39,7 +39,7 @@
 LIBS = -L../lib -l$(TOPLIBRARYNAME)
 #else
 #if linux
-LIBS = -L../lib -l$(TOPLIBRARYNAME) $(LIBCSEC) -lnsl -luuid
+LIBS = -L../lib -l$(TOPLIBRARYNAME) $(LIBCSEC) -lnsl /usr/lib/libuuid.a
 #else
 #if sgi
 LIBS = -L../lib -l$(TOPLIBRARYNAME)
--- work/lfc-1.3.7/srmv2/Imakefile	Tue Aug  2 10:04:51 2005
+++ work/lfc-1.3.7/srmv2/Imakefile.new	Tue Aug  2 10:11:25 2005
@@ -85,9 +85,9 @@
 
 #if UseOracle && !defined(_WIN32)
 srmv2: $(SRV_OBJS) $(DEPLIB)
-	$(MAKE) -f oralink.mk srmv2 SRV_OBJS="$(SRV_OBJS)" CLDFLAGS=$(MTLDFLAGS) LIBS="$(LIBS) $(SECLIB) $(MTLDLIBS) -luuid"
+	$(MAKE) -f oralink.mk srmv2 SRV_OBJS="$(SRV_OBJS)" CLDFLAGS=$(MTLDFLAGS) LIBS="$(LIBS) $(SECLIB) $(MTLDLIBS) /usr/lib/libuuid.a"
 #else
-NormalProgramTarget(srmv2,$(SRV_OBJS), $(DEPLIB), $(MTLDFLAGS) $(LIBS) $(SECLIB) $(MTLDLIBS) $(LIBORA) $(LIBMYS) -luuid)
+NormalProgramTarget(srmv2,$(SRV_OBJS), $(DEPLIB), $(MTLDFLAGS) $(LIBS) $(SECLIB) $(MTLDLIBS) $(LIBORA) $(LIBMYS) /usr/lib/libuuid.a)
 #endif
 
 install: $(BIN) $(IPROGS_D) $(SPOOL)
--- work/lfc-1.3.7/config/site.def	Tue Aug  2 10:12:22 2005
+++ work/lfc-1.3.7/config/site.def.new	Tue Aug  2 10:16:40 2005
@@ -34,7 +34,7 @@
 #define DpmConfigFile	$(prefix)/etc/DPMCONFIG
 #endif
 #define DpmHost	"UNUSED"
-#define DpmSpool	/var/log/dpm
+#define DpmSpool	$(prefix)/var/log/dpm
 #define FilManDir       $(prefix)/man/man4
 #define FilManSuffix    4
 #define GlobusLocation	$(prefix)/globus
@@ -69,7 +69,7 @@
 #endif
 #define ManDir  $(prefix)/man/man1
 #define ManSuffix       1
-#define MySQLLocation	/usr
+#define MySQLLocation	$(prefix)
 #define NfsRoot	/shift
 #if defined(_WIN32)
 #define NsConfigFile	%%SystemRoot%%\\system32\\drivers\\etc\\NSCONFIG
@@ -79,12 +79,12 @@
 #define NsHost	"UNUSED"
 #if BuildNameServerAsLFC
 #define NsHostPfx	lfc
-#define NsSpool	/var/log/lfc
+#define NsSpool	$(prefix)/var/log/lfc
 #define NsRoot  "/grid"
 #else
 #if BuildNameServerAsDPNS
 #define NsHostPfx	dpns
-#define NsSpool	/var/log/dpns
+#define NsSpool	$(prefix)/var/log/dpns
 #define NsRoot  "/dpm"
 #endif
 #endif
@@ -93,7 +93,7 @@
 #else
 #define OperatorDir	/etc/operator
 #endif
-#define RfioSpool	/var/log/rfio
+#define RfioSpool	$(prefix)/var/log/rfio
 #define SacctDir	/usr/spool/sacct
 #if defined(_WIN32)
 #define ShiftConfigFile	%%SystemRoot%%\\system32\\drivers\\etc\\shift.conf
--- work/lfc-1.3.7/config/site.def	Tue Aug  2 10:18:03 2005
+++ work/lfc-1.3.7/config/site.def.new	Tue Aug  2 10:20:17 2005
@@ -26,7 +26,7 @@
 #endif
 #define CupvHost	"UNUSED"
 #define CupvSpool	/usr/spool/upv
-#define DliSpool	/var/log/dli
+#define DliSpool	$(prefix)/var/log/dli
 #define DomainName	cern.ch
 #if defined(_WIN32)
 #define DpmConfigFile	%%SystemRoot%%\\system32\\drivers\\etc\\DPMCONFIG
@@ -100,8 +100,8 @@
 #else
 #define ShiftConfigFile	/etc/shift.conf
 #endif
-#define Srmv1Spool /var/log/srmv1
-#define Srmv2Spool /var/log/srmv2
+#define Srmv1Spool $(prefix)/var/log/srmv1
+#define Srmv2Spool $(prefix)/var/log/srmv2
 #define StagerSuperGroup	dpmmgr
 #define StagerSuperUser		dpmmgr
 #if BuildNameServerAsLFC
--- work/lfc-1.3.7/config/site.def	Tue Aug  2 10:20:57 2005
+++ work/lfc-1.3.7/config/site.def.new	Tue Aug  2 10:35:54 2005
@@ -16,8 +16,8 @@
 prefix = $(PREFIX)
 
 /* First define the flavour of Name Server to be built */
-#define BuildNameServerAsLFC	NO
-#define BuildNameServerAsDPNS	YES
+#define BuildNameServerAsLFC	YES
+#define BuildNameServerAsDPNS	NO
 
 #if defined(_WIN32)
 #define CupvConfigFile	%%SystemRoot%%\\system32\\drivers\\etc\\CUPVCONFIG
