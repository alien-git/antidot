--- work/apache-1.3.33/Makefile.in.ori	2005-08-26 18:24:33.000000000 +0200
+++ work/apache-1.3.33/Makefile.in	2005-08-26 18:31:34.000000000 +0200
@@ -4,19 +4,32 @@
 APACHE=apache_1.3.33
 MOD_PERL=mod_perl-1.29
 
+ifeq ($(shell uname -s),Darwin)
+export DYLD_LIBRARY_PATH:=$(PREFIX)/lib:$(DYLD_LIBRARY_PATH)
+else
 export LD_LIBRARY_PATH:=$(PREFIX)/lib:$(LD_LIBRARY_PATH)
+endif
 
 .PHONY:  config install
 
 all:	config install
 
 config:
+ifeq ($(shell uname -s),Darwin)
+	(cd $(APACHE); export SSL_BASE=/sw ; ./configure --prefix=$(PREFIX)/apache --enable-module=most --enable-shared=max --disable-module=auth_dbm --sysconfdir=$(PREFIX)/etc)
+else
 	(cd $(APACHE); ./configure --prefix=$(PREFIX)/apache --enable-module=most --enable-shared=max --disable-module=auth_dbm)
+endif
 
 install:
 	rm -rf $(PREFIX)/apache
+ifeq ($(shell uname -s),Darwin)
+	(cd $(MOD_SSL); export SSL_BASE=/sw ; ./configure  --with-apache=../$(APACHE) --prefix=$(PREFIX) --sysconfdir=$(PREFIX)/etc)
+	(cd $(MOD_PERL); export SSL_BASE=/sw; $(PREFIX)/bin/perl Makefile.PL  APACHE_SRC=../$(APACHE) DO_HTTPD=1 USE_APACI=1 EVERYTHING=1 SSL_BASE=/sw APACHE_PREFIX=$(PREFIX)/apache APACI_ARGS='--prefix=$(PREFIX)/apache,--enable-module=ssl,--enable-module=most,--enable-shared=max,--disable-shared=perl,--disable-module=auth_dbm --sysconfdir=$(PREFIX)/etc' && make && make install)
+else
 	(cd $(MOD_SSL); ./configure  --with-apache=../$(APACHE) --prefix=$(PREFIX))
 	(cd $(MOD_PERL); $(PREFIX)/bin/perl Makefile.PL  APACHE_SRC=../$(APACHE) DO_HTTPD=1 USE_APACI=1 EVERYTHING=1 SSL_BASE=$(PREFIX) APACHE_PREFIX=$(PREFIX)/apache APACI_ARGS='--prefix=$(PREFIX)/apache,--enable-module=ssl,--enable-module=most,--enable-shared=max,--disable-shared=perl,--disable-module=auth_dbm' && make && make install)
+endif
 
 clean:
 	(cd $(MOD_PERL); make distclean)
